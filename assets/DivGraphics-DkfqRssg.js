import{_}from"./ContentWrap.vue_vue_type_script_setup_true_lang-Xn0DdkPS.js";import{_ as C,u as g}from"./useCesium-Cl5_bCxu.js";import{l as x,z as y,m as v,S as w,R as k,q as M,O as B,u as f}from"./vue-chunks-DuYwYYUM.js";import"./index-C_PAZzvh.js";import"./element-plus-t0Lc7SBq.js";/* empty css                  */class D{constructor({viewer:e,elements:t,isBackHide:i=!0}){this._scratch=new Cesium.Cartesian2,this._viewer=e,this._scene=e.scene,this._camera=e.camera,this._container=null,this._elements=t,this._isBackHide=i,this.init()}init(){const e=document.createElement("div");e.className="lanwarf-css3-container",document.body.appendChild(e),this._container=e,this._elements.forEach(function(i){e.insertAdjacentHTML("beforeend",i.element)});const t=this;this._scene.preRender.addEventListener(function(){for(let i=0;i<e.children.length;i++){const a=Cesium.Cartesian3.fromDegrees(t._elements[i].position[0],t._elements[i].position[1],t._elements[i].position[2]||0),s=t._scene.cartesianToCanvasCoordinates(a,t._scratch);if(Cesium.defined(s)&&(e.children[i].style.left=parseFloat(s.x)+parseFloat(t._elements[i].offset[0])+"px",e.children[i].style.top=parseFloat(s.y)+parseFloat(t._elements[i].offset[1])+"px",t._isBackHide)){let r=t._camera.position,o=t._scene.globe.ellipsoid.cartesianToCartographic(r).height;o+=1*t._scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(r,a)>o?e.children[i].style.display="none":e.children[i].style.display="block"}}})}remove(e){this._elements=this._elements.filter(function(t){t.id}),this._container.removeChild(document.getElementById(e))}append(e){this._elements.push(e),this._container.insertAdjacentHTML("beforeend",e.element)}removeEntityLayer(e){this._viewer.entities.removeById(e+"_1"),this._viewer.entities.removeById(e+"_2"),this._viewer.entities.removeById(e+"_3"),this.remove(e)}addEntityLayer(e){let t=e.position[0],i=e.position[1],a=this,s=.001,r=s,o=s,p=s;setTimeout(function(R){},300);let l=Cesium.Math.toRadians(30),m=Cesium.Math.toRadians(30),n=e.boxHeight||300,c=e.boxHeightMax||400,d=e.boxHeightDif||10,u=!0;e.boxShow?this._viewer.entities.add({id:e.id+"_1",name:"立方体盒子",position:new Cesium.CallbackProperty(function(){return n=n+d,n>=c&&(n=c),Cesium.Cartesian3.fromDegrees(t,i,n/2)},!1),box:{dimensions:new Cesium.CallbackProperty(function(){return n=n+d,n>=c&&(n=c,u&&(u=!1,a.append(e,!0))),new Cesium.Cartesian3(e.boxSide||100,e.boxSide||100,n)},!1),material:e.boxMaterial||Cesium.Color.DEEPSKYBLUE.withAlpha(.5)}}):setTimeout(function(){a.append(e,!0)},100),e.circleShow&&(e.circleSize=e.circleSize||120,this._viewer.entities.add({id:e.id+"_2",name:"椭圆",position:Cesium.Cartesian3.fromDegrees(t,i),ellipse:{semiMinorAxis:new Cesium.CallbackProperty(function(){return s},!1),semiMajorAxis:new Cesium.CallbackProperty(function(){return r},!1),material:"data/images/Textures/circle2.png",rotation:new Cesium.CallbackProperty(function(){return l+=.05,l},!1),stRotation:new Cesium.CallbackProperty(function(){return l+=.05,l},!1),zIndex:2}}),this._viewer.entities.add({id:e.id+"_3",name:"椭圆",position:Cesium.Cartesian3.fromDegrees(t,i),ellipse:{semiMinorAxis:new Cesium.CallbackProperty(function(){return o},!1),semiMajorAxis:new Cesium.CallbackProperty(function(){return p},!1),material:"data/images/Textures/circle1.png",rotation:new Cesium.CallbackProperty(function(){return m-=.03,m},!1),stRotation:new Cesium.CallbackProperty(function(){return m-=.03,m},!1),zIndex:3}}))}}const P={class:"w-[100%] h-[100%]"},L=x({name:"DivGraphics",__name:"DivGraphics",setup(h){const{mapRegister:e,mapMethods:t}=g();let i;const a=s=>{s.camera.setView({destination:Cesium.Cartesian3.fromDegrees(120,30,1785e4*.01),orientation:{heading:Cesium.Math.toRadians(350.4202942851978),pitch:Cesium.Math.toRadians(-89.74026687972041),roll:Cesium.Math.toRadians(0)}}),i=new D({viewer:s,elements:[{id:"box4",position:[120,30,50],element:'<div style="position: fixed;top: 0;left: 0;color: red" id="box4">我是自定义div</div>',offset:[200,160]}],isBackHide:!1})};return y(()=>{i==null||i.remove("box4")}),(s,r)=>(v(),w(f(_),{title:"DivGraphics"},{default:k(()=>[M("div",P,[B(C,{onRegister:f(e),config:{},tiandituTk:"80cd3c8ae46ae32fa0ac19f6d739d310",cesiumLoadCB:a},null,8,["onRegister"])])]),_:1}))}});export{L as default};
//# sourceMappingURL=DivGraphics-DkfqRssg.js.map

{"version":3,"file":"RegisterForm.vue_vue_type_script_setup_true_lang-CRH3Hz6W.js","sources":["../../src/views/Login/components/RegisterForm.vue"],"sourcesContent":["<script setup lang=\"tsx\">\r\nimport { Form, FormSchema } from '@/components/Form'\r\nimport { reactive, ref } from 'vue'\r\nimport { useI18n } from '@/hooks/web/useI18n'\r\nimport { useForm } from '@/hooks/web/useForm'\r\nimport { ElButton, ElInput, FormRules } from 'element-plus'\r\nimport { useValidator } from '@/hooks/web/useValidator'\r\n\r\nconst emit = defineEmits(['to-login'])\r\n\r\nconst { formRegister, formMethods } = useForm()\r\nconst { getElFormExpose } = formMethods\r\n\r\nconst { t } = useI18n()\r\n\r\nconst { required } = useValidator()\r\n\r\nconst schema = reactive<FormSchema[]>([\r\n  {\r\n    field: 'title',\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    formItemProps: {\r\n      slots: {\r\n        default: () => {\r\n          return <h2 class=\"text-2xl font-bold text-center w-[100%]\">{t('login.register')}</h2>\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    field: 'username',\r\n    label: t('login.username'),\r\n    value: '',\r\n    component: 'Input',\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    componentProps: {\r\n      placeholder: t('login.usernamePlaceholder')\r\n    }\r\n  },\r\n  {\r\n    field: 'password',\r\n    label: t('login.password'),\r\n    value: '',\r\n    component: 'InputPassword',\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    componentProps: {\r\n      style: {\r\n        width: '100%'\r\n      },\r\n      strength: true,\r\n      placeholder: t('login.passwordPlaceholder')\r\n    }\r\n  },\r\n  {\r\n    field: 'check_password',\r\n    label: t('login.checkPassword'),\r\n    value: '',\r\n    component: 'InputPassword',\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    componentProps: {\r\n      style: {\r\n        width: '100%'\r\n      },\r\n      strength: true,\r\n      placeholder: t('login.passwordPlaceholder')\r\n    }\r\n  },\r\n  {\r\n    field: 'code',\r\n    label: t('login.code'),\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    formItemProps: {\r\n      slots: {\r\n        default: (formData) => {\r\n          return (\r\n            <div class=\"w-[100%] flex\">\r\n              <ElInput v-model={formData.code} placeholder={t('login.codePlaceholder')} />\r\n            </div>\r\n          )\r\n        }\r\n      }\r\n    }\r\n  },\r\n  {\r\n    field: 'register',\r\n    colProps: {\r\n      span: 24\r\n    },\r\n    formItemProps: {\r\n      slots: {\r\n        default: () => {\r\n          return (\r\n            <>\r\n              <div class=\"w-[100%]\">\r\n                <ElButton\r\n                  type=\"primary\"\r\n                  class=\"w-[100%]\"\r\n                  loading={loading.value}\r\n                  onClick={loginRegister}\r\n                >\r\n                  {t('login.register')}\r\n                </ElButton>\r\n              </div>\r\n              <div class=\"w-[100%] mt-15px\">\r\n                <ElButton class=\"w-[100%]\" onClick={toLogin}>\r\n                  {t('login.hasUser')}\r\n                </ElButton>\r\n              </div>\r\n            </>\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n])\r\n\r\nconst rules: FormRules = {\r\n  username: [required()],\r\n  password: [required()],\r\n  check_password: [required()],\r\n  code: [required()]\r\n}\r\n\r\nconst toLogin = () => {\r\n  emit('to-login')\r\n}\r\n\r\nconst loading = ref(false)\r\n\r\nconst loginRegister = async () => {\r\n  const formRef = await getElFormExpose()\r\n  formRef?.validate(async (valid) => {\r\n    if (valid) {\r\n      try {\r\n        loading.value = true\r\n        toLogin()\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n  })\r\n}\r\n</script>\r\n\r\n<template>\r\n  <Form\r\n    :schema=\"schema\"\r\n    :rules=\"rules\"\r\n    label-position=\"top\"\r\n    hide-required-asterisk\r\n    size=\"large\"\r\n    class=\"dark:border-1 dark:border-[var(--el-border-color)] dark:border-solid\"\r\n    @register=\"formRegister\"\r\n  />\r\n</template>\r\n"],"names":["_isSlot","s","Object","prototype","toString","call","_isVNode","emit","__emit","formRegister","formMethods","useForm","getElFormExpose","t","useI18n","required","useValidator","schema","reactive","field","colProps","span","formItemProps","slots","default","_createVNode","label","value","component","componentProps","placeholder","style","width","strength","formData","ElInput","code","$event","_slot","_slot2","_Fragment","ElButton","loading","loginRegister","toLogin","rules","username","password","check_password","ref","__async","formRef","validate","valid"],"mappings":"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"}
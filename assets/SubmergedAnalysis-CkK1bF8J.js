var f=(d,m,s)=>new Promise((i,n)=>{var c=t=>{try{a(s.next(t))}catch(e){n(e)}},r=t=>{try{a(s.throw(t))}catch(e){n(e)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(c,r);a((s=s.apply(d,m)).next())});import{_ as k}from"./ContentWrap.vue_vue_type_script_setup_true_lang-DXMj_k4I.js";import{_ as S,u as x}from"./useCesium-BVJiPYa5.js";import"./index-DrTOaMr6.js";import{C as v}from"./index-DO19Fvpz.js";import{c as w}from"./element-plus-t0Lc7SBq.js";import{l as T,m as B,S as D,R as g,O as h,u,V as L,q as R}from"./vue-chunks-DuYwYYUM.js";/* empty css                  */import"./index-Cjfam9dp.js";import"./index-BR6LcWRs.js";import"./HexagonSpreadMaterialProperty-CggJxjwh.js";const A={class:"h-[calc(100vh-280px)]"},W=T({name:"SubmergedAnalysis",__name:"SubmergedAnalysis",setup(d){const{mapRegister:m,mapMethods:s}=x();let i;const n=r=>f(this,null,function*(){let a=yield Cesium.Cesium3DTileset.fromUrl("src/assets/file/保利b3dm/tileset.json",{skipLevelOfDetail:!0,baseScreenSpaceError:1024,skipScreenSpaceErrorFactor:16,skipLevels:2,immediatelyLoadDesiredLevelOfDetail:!1,loadSiblings:!1,cullWithChildrenBounds:!0});r.scene.primitives.add(a),r.zoomTo(a),r.scene.globe.translucency.enabled=!0;let t=-65;var e=Cesium.Cartographic.fromCartesian(a.boundingSphere.center),C=Cesium.Cartesian3.fromRadians(e.longitude,e.latitude,e.height),_=Cesium.Cartesian3.fromRadians(e.longitude,e.latitude,e.height+t),y=Cesium.Cartesian3.subtract(_,C,new Cesium.Cartesian3);a.modelMatrix=Cesium.Matrix4.fromTranslation(y);let p=100,b=.1,o=10;i=new v(r),i.drawPolygonGraphics({height:1,callback:(H,l)=>{if(r.scene.globe.depthTestAgainstTerrain)return alert("请开启深度检测"),!1;l&&(l.polygon.perPositionHeight=!0,l.polygon.extrudedHeight=new Cesium.CallbackProperty(()=>(o=o+b,o>p&&(o=p),o),!1),l.polygon.material="src/assets/image/water.jpg")}})}),c=()=>{i.drawLayer.entities.removeAll()};return(r,a)=>(B(),D(u(k),{title:"淹没分析"},{default:g(()=>[h(u(w),{type:"primary",onClick:c},{default:g(()=>[L("清除")]),_:1}),R("div",A,[h(S,{onRegister:u(m),config:{},tiandituTk:"80cd3c8ae46ae32fa0ac19f6d739d310",cesiumLoadCB:n},null,8,["onRegister"])])]),_:1}))}});export{W as default};
//# sourceMappingURL=SubmergedAnalysis-CkK1bF8J.js.map

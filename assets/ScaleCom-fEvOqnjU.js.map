{"version":3,"file":"ScaleCom-fEvOqnjU.js","sources":["../../src/views/Visualization/component/ScaleCom/useDraw.ts","../../src/views/Visualization/component/ScaleCom/ScaleCom.vue"],"sourcesContent":["import { ref } from 'vue'\r\n\r\nexport default function useDraw() {\r\n  // 指向最外层容器\r\n  const appRef = ref()\r\n  // 定时函数\r\n  const timer = ref(0)\r\n  // 默认缩放值\r\n  const scale = {\r\n    width: '1',\r\n    height: '1'\r\n  }\r\n  // 设计稿尺寸（px）\r\n  const baseWidth = 1920\r\n  const baseHeight = 1080\r\n\r\n  // 需保持的比例\r\n  const baseProportion = parseFloat((baseWidth / baseHeight).toFixed(5))\r\n  const calcRate = () => {\r\n    // 当前宽高比\r\n    const currentRate = parseFloat((window.innerWidth / window.innerHeight).toFixed(5))\r\n    if (appRef.value) {\r\n      if (currentRate > baseProportion) {\r\n        // 表示更宽\r\n        scale.width = ((window.innerHeight * baseProportion) / baseWidth).toFixed(5)\r\n        scale.height = (window.innerHeight / baseHeight).toFixed(5)\r\n      } else {\r\n        // 表示更高\r\n        scale.height = (window.innerWidth / baseProportion / baseHeight).toFixed(5)\r\n        scale.width = (window.innerWidth / baseWidth).toFixed(5)\r\n      }\r\n      appRef.value.style.transform = `scale(${scale.width}, ${scale.height}) translate(-50%, -50%)`\r\n    }\r\n  }\r\n\r\n  const resize = () => {\r\n    clearTimeout(timer.value)\r\n    timer.value = setTimeout(() => {\r\n      calcRate()\r\n    }, 200)\r\n  }\r\n\r\n  // 改变窗口大小重新绘制\r\n  const windowDraw = () => {\r\n    window.addEventListener('resize', resize)\r\n  }\r\n\r\n  // 改变窗口大小重新绘制\r\n  const unWindowDraw = () => {\r\n    window.removeEventListener('resize', resize)\r\n  }\r\n\r\n  return {\r\n    appRef,\r\n    calcRate,\r\n    windowDraw,\r\n    unWindowDraw\r\n  }\r\n}\r\n","<script setup lang=\"ts\">\r\ndefineOptions({\r\n  name: 'ScaleCom'\r\n})\r\n\r\nimport useDraw from './useDraw'\r\nimport { onBeforeMount, onMounted } from 'vue'\r\nimport { useDesign } from '@/hooks/web/useDesign'\r\n// * 适配处理\r\nconst { appRef, calcRate, windowDraw, unWindowDraw } = useDraw()\r\n\r\nconst { getPrefixCls } = useDesign()\r\nonMounted(() => {\r\n  calcRate()\r\n  windowDraw()\r\n})\r\n\r\nonBeforeMount(() => {\r\n  unWindowDraw()\r\n})\r\n</script>\r\n\r\n<template>\r\n  <div ref=\"appRef\" :class=\"getPrefixCls('autofit')\" class=\"autofit\">\r\n    <slot></slot>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.autofit {\r\n  color: #d3d6dd;\r\n  /*根据设计稿的宽高进行修改*/\r\n  width: 1920px;\r\n  height: 1080px;\r\n  position: relative;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n  transform-origin: left top;\r\n}\r\n</style>\r\n"],"names":["useDraw","appRef","ref","timer","scale","baseWidth","baseHeight","baseProportion","calcRate","currentRate","resize","windowDraw","unWindowDraw","getPrefixCls","useDesign","onMounted","onBeforeMount"],"mappings":"uLAEA,SAAwBA,GAAU,CAEhC,MAAMC,EAASC,IAETC,EAAQD,EAAI,CAAC,EAEbE,EAAQ,CACZ,MAAO,IACP,OAAQ,GAAA,EAGJC,EAAY,KACZC,EAAa,KAGbC,EAAiB,YAAYF,EAAYC,GAAY,QAAQ,CAAC,CAAC,EAC/DE,EAAW,IAAM,CAEf,MAAAC,EAAc,YAAY,OAAO,WAAa,OAAO,aAAa,QAAQ,CAAC,CAAC,EAC9ER,EAAO,QACLQ,EAAcF,GAEhBH,EAAM,OAAU,OAAO,YAAcG,EAAkBF,GAAW,QAAQ,CAAC,EAC3ED,EAAM,QAAU,OAAO,YAAcE,GAAY,QAAQ,CAAC,IAG1DF,EAAM,QAAU,OAAO,WAAaG,EAAiBD,GAAY,QAAQ,CAAC,EAC1EF,EAAM,OAAS,OAAO,WAAaC,GAAW,QAAQ,CAAC,GAElDJ,EAAA,MAAM,MAAM,UAAY,SAASG,EAAM,KAAK,KAAKA,EAAM,MAAM,0BACtE,EAGIM,EAAS,IAAM,CACnB,aAAaP,EAAM,KAAK,EAClBA,EAAA,MAAQ,WAAW,IAAM,CACpBK,KACR,GAAG,CAAA,EAaD,MAAA,CACL,OAAAP,EACA,SAAAO,EACA,WAZiB,IAAM,CAChB,OAAA,iBAAiB,SAAUE,CAAM,CAAA,EAYxC,aARmB,IAAM,CAClB,OAAA,oBAAoB,SAAUA,CAAM,CAAA,CAO3C,CAEJ,uDCjDA,KAAM,CAAE,OAAAT,EAAQ,SAAAO,EAAU,WAAAG,EAAY,aAAAC,CAAA,EAAiBZ,IAEjD,CAAE,aAAAa,GAAiBC,IACzB,OAAAC,EAAU,IAAM,CACLP,IACEG,GAAA,CACZ,EAEDK,EAAc,IAAM,CACLJ,GAAA,CACd"}
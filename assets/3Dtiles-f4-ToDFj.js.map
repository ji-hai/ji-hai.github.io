{"version":3,"file":"3Dtiles-f4-ToDFj.js","sources":["../../src/views/SceneEffects/3Dtiles.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ContentWrap } from '@/components/ContentWrap'\r\nimport CesiumComponent from '@/components/Cesium/Cesium.component.vue'\r\nimport { useCesium } from '@/hooks/web/useCesium'\r\nimport { ElLink } from 'element-plus'\r\nimport * as Cesium from 'cesium'\r\n\r\nconst { mapRegister, mapMethods } = useCesium()\r\n\r\nconst { getMap } = mapMethods\r\n\r\ndefineOptions({\r\n  name: '3Dtiles'\r\n})\r\n\r\nconst cesiumLoadCB = async (viewer) => {\r\n  let tileset = await Cesium.Cesium3DTileset.fromUrl('src/assets/file/保利b3dm/tileset.json', {\r\n    skipLevelOfDetail: true,\r\n    baseScreenSpaceError: 1024,\r\n    skipScreenSpaceErrorFactor: 16,\r\n    skipLevels: 2,\r\n    immediatelyLoadDesiredLevelOfDetail: false,\r\n    loadSiblings: false,\r\n    cullWithChildrenBounds: true\r\n  })\r\n  viewer.scene.primitives.add(tileset)\r\n  viewer.zoomTo(tileset)\r\n  viewer.scene.globe.translucency.enabled = true\r\n  viewer.scene.globe.depthTestAgainstTerrain = true\r\n\r\n  //根据地形设置调整高度\r\n  let height = -65 //设置高度调整参数\r\n  var cartographic = Cesium.Cartographic.fromCartesian(tileset.boundingSphere.center)\r\n  var surface = Cesium.Cartesian3.fromRadians(\r\n    cartographic.longitude,\r\n    cartographic.latitude,\r\n    cartographic.height\r\n  )\r\n  var offset = Cesium.Cartesian3.fromRadians(\r\n    cartographic.longitude,\r\n    cartographic.latitude,\r\n    cartographic.height + height\r\n  )\r\n  var translation = Cesium.Cartesian3.subtract(offset, surface, new Cesium.Cartesian3())\r\n  tileset.modelMatrix = Cesium.Matrix4.fromTranslation(translation)\r\n\r\n  // 3d tiles调试面板\r\n  // viewer.extend(Cesium.viewerCesium3DTilesInspectorMixin);\r\n}\r\n</script>\r\n\r\n<template>\r\n  <ContentWrap title=\"3Dtiles\">\r\n    <div class=\"h-[calc(100vh-280px)]\">\r\n      <cesium-component\r\n        @register=\"mapRegister\"\r\n        :config=\"{\r\n          // homeButton: true\r\n        }\"\r\n        tiandituTk=\"80cd3c8ae46ae32fa0ac19f6d739d310\"\r\n        :cesiumLoadCB=\"cesiumLoadCB\"\r\n      />\r\n    </div>\r\n  </ContentWrap>\r\n</template>\r\n"],"names":["mapRegister","mapMethods","useCesium","cesiumLoadCB","viewer","__async","tileset","height","cartographic","surface","offset","translation"],"mappings":"ylBAOA,KAAA,CAAA,YAAAA,EAAA,WAAAC,CAAA,EAAAC,EAAA,EAQAC,EAAAC,GAAAC,EAAA,sBACE,IAAAC,EAAA,MAAA,OAAA,gBAAA,QAAA,sCAAA,CAA0F,kBAAA,GACrE,qBAAA,KACG,2BAAA,GACM,WAAA,EAChB,oCAAA,GACyB,aAAA,GACvB,uBAAA,EACU,CAAA,EAE1BF,EAAA,MAAA,WAAA,IAAAE,CAAA,EACAF,EAAA,OAAAE,CAAA,EACAF,EAAA,MAAA,MAAA,aAAA,QAAA,GACAA,EAAA,MAAA,MAAA,wBAAA,GAGA,IAAAG,EAAA,IACA,IAAAC,EAAA,OAAA,aAAA,cAAAF,EAAA,eAAA,MAAA,EACAG,EAAA,OAAA,WAAA,YAAgCD,EAAA,UACjBA,EAAA,SACAA,EAAA,MACA,EAEfE,EAAA,OAAA,WAAA,YAA+BF,EAAA,UAChBA,EAAA,SACAA,EAAA,OAAAD,CACS,EAExBI,EAAA,OAAA,WAAA,SAAAD,EAAAD,EAAA,IAAA,OAAA,UAAA,EACAH,EAAA,YAAA,OAAA,QAAA,gBAAAK,CAAA,CAAgE"}
{"version":3,"file":"SkyBox-enpuR2eJ.js","sources":["../../src/views/SkyBox/SkyBox.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\nimport { ElButton } from 'element-plus'\r\nimport { ContentWrap } from '@/components/ContentWrap'\r\nimport CesiumComponent from '@/components/Cesium/Cesium.component.vue'\r\n\r\nimport { useCesium } from '@/hooks/web/useCesium'\r\n\r\nimport { CesiumBase } from '@/components/Cesium/CesiumBase'\r\n\r\nconst { mapRegister, mapMethods } = useCesium()\r\n\r\nconst { getMap } = mapMethods\r\n\r\ndefineOptions({\r\n  name: 'SkyBox'\r\n})\r\n\r\nconst cesiumLoadCB = (viewer) => {\r\n  // viewer.scene.skyBox = CesiumBase.setTwoSkyBox()\r\n  // viewer.scene.postProcessStages.add(CesiumBase.setDarkEffect())\r\n}\r\n\r\nconst BtnType = ref(0)\r\nconst getStage = (name) => {\r\n  let stage = null,\r\n    stages = getMap().scene.postProcessStages\r\n  for (let i = 0; i < stages._stages.length; i++) {\r\n    let tmp = stages.get(i)\r\n    if (tmp.name == name) {\r\n      stage = tmp\r\n      break\r\n    }\r\n  }\r\n  return stage\r\n}\r\n\r\nconst removePostProcessStage = (name) => {\r\n  let stage = getStage(name)\r\n  if (stage) {\r\n    getMap().scene.postProcessStages.remove(stage)\r\n  }\r\n}\r\n\r\nconst changeSkyBox = (type: number) => {\r\n  removePostProcessStage('darkEffect')\r\n  removePostProcessStage('rainEffect')\r\n  removePostProcessStage('snowEffect')\r\n  removePostProcessStage('fogEffect')\r\n  removePostProcessStage('blur_x_direction')\r\n  BtnType.value = type\r\n  switch (type) {\r\n    case 1:\r\n      getMap().scene.skyBox = CesiumBase.setOneSkyBox()\r\n      break\r\n    case 2:\r\n      getMap().scene.skyBox = CesiumBase.setTwoSkyBox()\r\n      break\r\n    case 3:\r\n      getMap().scene.skyBox = CesiumBase.setThreeSkyBox()\r\n      break\r\n    case 4:\r\n      getMap().scene.postProcessStages.add(CesiumBase.setDarkEffect())\r\n      break\r\n    // case 5:\r\n    //   getMap().scene.postProcessStages.add(CesiumBase.setBlurBloom({ width: 800, height: 800 }))\r\n    //   break\r\n    case 6:\r\n      getMap().scene.postProcessStages.add(CesiumBase.setRainEffect())\r\n      break\r\n    case 7:\r\n      getMap().scene.postProcessStages.add(CesiumBase.setSnowEffect())\r\n      break\r\n    case 8:\r\n      getMap().scene.postProcessStages.add(CesiumBase.setFogEffect())\r\n      break  \r\n    default:\r\n      break\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <ContentWrap title=\"天空盒\">\r\n    <div class=\"w-[100%] h-[50px]\">\r\n      <ElButton :type=\"BtnType === 1 ? 'primary' : ''\" @click=\"changeSkyBox(1)\">天空盒1</ElButton>\r\n      <ElButton :type=\"BtnType === 2 ? 'primary' : ''\" @click=\"changeSkyBox(2)\">天空盒2</ElButton>\r\n      <ElButton :type=\"BtnType === 3 ? 'primary' : ''\" @click=\"changeSkyBox(3)\">天空盒3</ElButton>\r\n      <ElButton :type=\"BtnType === 4 ? 'primary' : ''\" @click=\"changeSkyBox(4)\">黑夜特效</ElButton>\r\n      <!-- <ElButton :type=\"BtnType === 5 ? 'primary' : ''\" @click=\"changeSkyBox(5)\">场景蓝光</ElButton> -->\r\n      <ElButton :type=\"BtnType === 6 ? 'primary' : ''\" @click=\"changeSkyBox(6)\">雨天特效</ElButton>\r\n      <ElButton :type=\"BtnType === 7 ? 'primary' : ''\" @click=\"changeSkyBox(7)\">雪天特效</ElButton>\r\n      <ElButton :type=\"BtnType === 8 ? 'primary' : ''\" @click=\"changeSkyBox(8)\">雾天特效</ElButton>\r\n    </div>\r\n    <div class=\"w-[100%] h-[100%]\">\r\n      <cesium-component\r\n        @register=\"mapRegister\"\r\n        :config=\"{\r\n          // homeButton: true\r\n        }\"\r\n        tiandituTk=\"80cd3c8ae46ae32fa0ac19f6d739d310\"\r\n        :cesiumLoadCB=\"cesiumLoadCB\"\r\n      />\r\n    </div>\r\n  </ContentWrap>\r\n</template>\r\n"],"names":["mapRegister","mapMethods","useCesium","getMap","cesiumLoadCB","viewer","BtnType","ref","getStage","name","stage","stages","i","tmp","removePostProcessStage","changeSkyBox","type","CesiumBase"],"mappings":"2eAUA,KAAM,CAAE,YAAAA,EAAa,WAAAC,CAAW,EAAIC,EAAU,EAExC,CAAE,OAAAC,CAAW,EAAAF,EAMbG,EAAgBC,GAAW,CAAA,EAK3BC,EAAUC,EAAI,CAAC,EACfC,EAAYC,GAAS,CACzB,IAAIC,EAAQ,KACVC,EAASR,IAAS,MAAM,kBAC1B,QAASS,EAAI,EAAGA,EAAID,EAAO,QAAQ,OAAQC,IAAK,CAC1C,IAAAC,EAAMF,EAAO,IAAIC,CAAC,EAClB,GAAAC,EAAI,MAAQJ,EAAM,CACZC,EAAAG,EACR,KACF,CACF,CACO,OAAAH,CAAA,EAGHI,EAA0BL,GAAS,CACnC,IAAAC,EAAQF,EAASC,CAAI,EACrBC,GACFP,EAAS,EAAA,MAAM,kBAAkB,OAAOO,CAAK,CAC/C,EAGIK,EAAgBC,GAAiB,CAOrC,OANAF,EAAuB,YAAY,EACnCA,EAAuB,YAAY,EACnCA,EAAuB,YAAY,EACnCA,EAAuB,WAAW,EAClCA,EAAuB,kBAAkB,EACzCR,EAAQ,MAAQU,EACRA,EAAM,CACZ,IAAK,GACHb,EAAS,EAAA,MAAM,OAASc,EAAW,aAAa,EAChD,MACF,IAAK,GACHd,EAAS,EAAA,MAAM,OAASc,EAAW,aAAa,EAChD,MACF,IAAK,GACHd,EAAS,EAAA,MAAM,OAASc,EAAW,eAAe,EAClD,MACF,IAAK,GACHd,EAAA,EAAS,MAAM,kBAAkB,IAAIc,EAAW,eAAe,EAC/D,MAIF,IAAK,GACHd,EAAA,EAAS,MAAM,kBAAkB,IAAIc,EAAW,eAAe,EAC/D,MACF,IAAK,GACHd,EAAA,EAAS,MAAM,kBAAkB,IAAIc,EAAW,eAAe,EAC/D,MACF,IAAK,GACHd,EAAA,EAAS,MAAM,kBAAkB,IAAIc,EAAW,cAAc,EAC9D,KAGJ,CAAA"}
{"version":3,"file":"AnimationModel-BPThtpcH.js","sources":["../../src/views/Line/AnimationModel.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ContentWrap } from '@/components/ContentWrap'\r\nimport CesiumComponent from '@/components/Cesium/Cesium.component.vue'\r\n\r\nimport { useCesium } from '@/hooks/web/useCesium'\r\nimport * as Cesium from 'cesium'\r\n\r\nimport {\r\n  CustomMaterial,\r\n  CustomMaterialWall,\r\n  DynamicWallMaterialProperty,\r\n  PolylineTrailLinkMaterialProperty\r\n} from '@/components/Cesium/CesiumMaterialProperty'\r\n\r\nconst { mapRegister, mapMethods } = useCesium()\r\n\r\nconst { getMap } = mapMethods\r\n\r\ndefineOptions({\r\n  name: 'AnimationModel'\r\n})\r\n\r\nconst cesiumLoadCB = (viewer) => {\r\n  let startPosition = new Cesium.Cartesian3.fromDegrees(120.14046454, 30.27415039)\r\n  let endPosition = new Cesium.Cartesian3.fromDegrees(120.16701991, 30.27648221)\r\n  let factor = 0\r\n  // 添加模型\r\n  const vehicleEntity = viewer.entities.add({\r\n    position: new Cesium.CallbackProperty(function () {\r\n      if (factor > 5000) {\r\n        factor = 0\r\n      }\r\n      factor++\r\n      // 动态更新位置\r\n      return Cesium.Cartesian3.lerp(\r\n        startPosition,\r\n        endPosition,\r\n        factor / 5000.0,\r\n        new Cesium.Cartesian3()\r\n      )\r\n    }, false),\r\n    // orientation: Cesium.Transforms.headingPitchRollQuaternion(\r\n    //   Cesium.Cartesian3.fromDegrees(120.16907205003166, 30.175928962346774, 0),\r\n    //   new Cesium.HeadingPitchRoll(\r\n    //     Cesium.Math.toRadians(90), // 方向\r\n    //     Cesium.Math.toRadians(0),\r\n    //     Cesium.Math.toRadians(0)\r\n    //   )\r\n    // ),\r\n    model: {\r\n      uri: 'src/assets/SampleData/glb/redCar.glb',\r\n      scale: 0.1\r\n    },\r\n    path: {\r\n      resolution: 60,\r\n      width: 100,\r\n      material: Cesium.Color.RED,\r\n      leadTime: 0,\r\n      trailTime: 0\r\n    }\r\n  })\r\n\r\n  // 聚焦模型\r\n  viewer.trackedEntity = vehicleEntity\r\n}\r\n</script>\r\n\r\n<template>\r\n  <ContentWrap title=\"动态更新位置\">\r\n    <div class=\"w-[100%] h-[100%]\">\r\n      <cesium-component\r\n        @register=\"mapRegister\"\r\n        :config=\"{\r\n          // homeButton: true\r\n        }\"\r\n        tiandituTk=\"80cd3c8ae46ae32fa0ac19f6d739d310\"\r\n        :cesiumLoadCB=\"cesiumLoadCB\"\r\n      />\r\n    </div>\r\n  </ContentWrap>\r\n</template>\r\n"],"names":["mapRegister","mapMethods","useCesium","cesiumLoadCB","viewer","startPosition","endPosition","factor","vehicleEntity"],"mappings":"2ZAcA,KAAA,CAAA,YAAAA,EAAA,WAAAC,CAAA,EAAAC,EAAA,EAQAC,EAAAC,GAAA,CACE,IAAAC,EAAA,IAAA,OAAA,WAAA,YAAA,aAAA,WAAA,EACAC,EAAA,IAAA,OAAA,WAAA,YAAA,aAAA,WAAA,EACAC,EAAA,EAEA,MAAAC,EAAAJ,EAAA,SAAA,IAAA,CAA0C,SAAA,IAAA,OAAA,iBAAA,UAAA,CAEtC,OAAAG,EAAA,MACEA,EAAA,GAEFA,IAEA,OAAA,WAAA,KAAyBF,EACvBC,EACAC,EAAA,IACS,IAAA,OAAA,UACa,CACxB,EAAA,EAAA,EACM,MAAA,CASD,IAAA,uCACA,MAAA,EACE,EACT,KAAA,CACM,WAAA,GACQ,MAAA,IACL,SAAA,OAAA,MAAA,IACgB,SAAA,EACb,UAAA,CACC,CACb,CAAA,EAIFH,EAAA,cAAAI,CAAuB"}
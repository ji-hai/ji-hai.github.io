{"version":3,"file":"EagleEye-BS6w5c1s.js","sources":["../../src/components/Cesium/CesiumEagleEye/index.ts","../../src/views/SceneEffects/EagleEye.vue"],"sourcesContent":["/*\r\n * @Description: 鹰眼地图效果\r\n */\r\nimport * as Cesium from 'cesium'\r\n\r\nclass CesiumEagleEye {\r\n  declare _viewer: any\r\n  declare _hawkEyeMap: any\r\n  declare el: Element\r\n  constructor(viewer, el) {\r\n    this._viewer = viewer\r\n    this._hawkEyeMap = null\r\n    this.el = el\r\n    this._init()\r\n  }\r\n\r\n  // 初始化函数\r\n  _init() {\r\n    this._hawkEyeMap = new Cesium.Viewer(this.el, {\r\n      geocoder: false,\r\n      homeButton: false,\r\n      sceneModePicker: false,\r\n      baseLayerPicker: false,\r\n      navigationHelpButton: false,\r\n      animation: false,\r\n      timeline: false,\r\n      fullscreenButton: false\r\n    })\r\n    this._hawkEyeMap.cesiumWidget.creditContainer.style.display = 'none'\r\n    this._hawkEyeMap.scene.backgroundColor = Cesium.Color.TRANSPARENT\r\n    this._hawkEyeMap.imageryLayers.removeAll()\r\n\r\n    // 鹰眼图中添加高德路网中文注记图\r\n    this._hawkEyeMap.imageryLayers.addImageryProvider(\r\n      new Cesium.UrlTemplateImageryProvider({\r\n        url: 'http://webrd02.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}',\r\n        minimumLevel: 3,\r\n        maximumLevel: 18\r\n      })\r\n    )\r\n\r\n    // 引起事件监听的相机变化幅度\r\n    this._viewer.camera.percentageChanged = 0.01\r\n\r\n    this._bindEvent()\r\n  }\r\n\r\n  // 绑定事件\r\n  _bindEvent() {\r\n    // 监听主图相机变化\r\n    this._viewer.camera.changed.addEventListener(this._syncMap, this)\r\n    // 第一次刷新渲染时联动（否则第一次鹰眼地图不会联动）\r\n    // this._viewer.scene.preRender.addEventListener(this._syncMap, this)\r\n  }\r\n\r\n  // 同步主图与鹰眼地图\r\n  _syncMap() {\r\n    this._hawkEyeMap.camera.flyTo({\r\n      destination: this._viewer.camera.position,\r\n      orientation: {\r\n        heading: this._viewer.camera.heading,\r\n        pitch: this._viewer.camera.pitch,\r\n        roll: this._viewer.camera.roll\r\n      },\r\n      duration: 0.0\r\n    })\r\n  }\r\n}\r\n\r\nexport default CesiumEagleEye\r\n","<script setup lang=\"ts\">\r\nimport { onMounted, defineOptions } from 'vue'\r\nimport { ContentWrap } from '@/components/ContentWrap'\r\nimport CesiumComponent from '@/components/Cesium/Cesium.component.vue'\r\n\r\nimport { useCesium } from '@/hooks/web/useCesium'\r\n\r\nimport CesiumEagleEye from '@/components/Cesium/CesiumEagleEye'\r\nconst { mapRegister, mapMethods } = useCesium()\r\n\r\nconst { getMap } = mapMethods\r\n\r\ndefineOptions({\r\n  name: 'EagleEye'\r\n})\r\n\r\nconst cesiumLoadCB = (viewer) => {\r\n  new CesiumEagleEye(getMap(), 'eye')\r\n}\r\n\r\n// onMounted(() => {\r\n//   setTimeout(() => {\r\n//     new CesiumEagleEye(getMap(), 'eye')\r\n//   }, 2000)\r\n// })\r\n</script>\r\n\r\n<template>\r\n  <ContentWrap title=\"地球自转\">\r\n    <div class=\"w-100px h-100px\" id=\"eye\"></div>\r\n    <div class=\"w-[100%] h-[100%]\">\r\n      <cesium-component\r\n        @register=\"mapRegister\"\r\n        :config=\"{\r\n          // homeButton: true\r\n        }\"\r\n        tiandituTk=\"80cd3c8ae46ae32fa0ac19f6d739d310\"\r\n        :cesiumLoadCB=\"cesiumLoadCB\"\r\n      />\r\n    </div>\r\n  </ContentWrap>\r\n</template>\r\n"],"names":["CesiumEagleEye","viewer","el","mapRegister","mapMethods","useCesium","getMap","cesiumLoadCB"],"mappings":"2TAKA,MAAAA,CAAA,CAAqB,YAAAC,EAAAC,EAAA,CAKjB,KAAA,QAAAD,EACA,KAAA,YAAA,KACA,KAAA,GAAAC,EACA,KAAA,MAAA,CAAW,CACb,OAAA,CAIE,KAAA,YAAA,IAAA,OAAA,OAAA,KAAA,GAAA,CAA8C,SAAA,GAClC,WAAA,GACE,gBAAA,GACK,gBAAA,GACA,qBAAA,GACK,UAAA,GACX,SAAA,GACD,iBAAA,EACQ,CAAA,EAEpB,KAAA,YAAA,aAAA,gBAAA,MAAA,QAAA,OACA,KAAA,YAAA,MAAA,gBAAA,OAAA,MAAA,YACA,KAAA,YAAA,cAAA,YAGA,KAAA,YAAA,cAAA,mBAA+B,IAAA,OAAA,2BAAA,CACS,IAAA,gGAC/B,aAAA,EACS,aAAA,EACA,CAAA,CACf,EAIH,KAAA,QAAA,OAAA,kBAAA,IAEA,KAAA,WAAA,CAAgB,CAClB,YAAA,CAKE,KAAA,QAAA,OAAA,QAAA,iBAAA,KAAA,SAAA,IAAA,CAAgE,CAGlE,UAAA,CAIE,KAAA,YAAA,OAAA,MAAA,CAA8B,YAAA,KAAA,QAAA,OAAA,SACK,YAAA,CACpB,QAAA,KAAA,QAAA,OAAA,QACkB,MAAA,KAAA,QAAA,OAAA,MACF,KAAA,KAAA,QAAA,OAAA,IACD,EAC5B,SAAA,CACU,CAAA,CACX,CAEL,2IC3DA,KAAM,CAAE,YAAAC,EAAa,WAAAC,CAAW,EAAIC,EAAU,EAExC,CAAE,OAAAC,CAAW,EAAAF,EAMbG,EAAgBN,GAAW,CAC3B,IAAAD,EAAeM,IAAU,KAAK,CAAA"}